<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Javascript Async</title>
</head>
<body>

</body>
</html>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script type="text/javascript">
	//1. callback function
	function fn1(callback){
		console.log("start fn1");
		setTimeout(function(){
			console.log("im fn1, i did something here and spend 0.1 second")
			callback();
		},100);
		console.log("after fn1 setTimeout")
	};
	
	function fn2(){
		console.log("i'm fn2");		
	}
	
	fn1(fn2);
	/*
		Output: 
		start
		after setTimeout
		i'm callback
	*/
	
	
	//2. event listener
	//fn3.on("done", fn4);
	//EventTarget.prototype.addEventListener.call(fn3, "done", fn4, false);
	//fn3.addEventListener("done", fn4, false);
	
	function fn3(){
		console.log("start fn3");
		setTimeout(function(){
			console.log("im fn3, i did something here and spend 0.1 second");
			fn3.trigger("done");
		},100);
		console.log("after fn3 setTimeout")	
			
	}
	
	function fn4(){
		console.log("i'm fn4");		
	}
	
	//fn3();
	
	//3. Observer pattern
	//jQuery.subscribe("done", f6);
	
	function f5(){
		console.log("start fn5");
　　　		setTimeout(function () {
　　　　　　		console.log("start fn5");
　　　　　　		jQuery.publish("done");
　　　		}, 1000);
　　	}
	
	function f6(){
		console.log("im f6");
	}
	
	//f5();
	
	//4. Promises object	
	function f1(){
　　　　	var dfd = $.Deferred();
　　　　	setTimeout(function () {
　　　　　　		dfd.resolve();
　　　　	}, 500);
　　　　	return dfd.promise;
　　	}
	
	f1().then(f2);
	f1().then(f2).then(f3);
	f1().then(f2).fail(f3);
</script>