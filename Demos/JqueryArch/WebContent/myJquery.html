<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>file:///C:/Gaopeng.Chen/workspace/JqueryArch/WebContent/myJquery.html</title>
</head>
<body>
	<div id = "myDiv">Lets try jquery</div>
</body>
</html>
<script type="text/javascript">
	(function(window, undefined){
		var myJquery = function(selector){
			return new myJquery.fn.init(selector);
		};	

		myJquery.prototype = myJquery.fn = {
			constructor: myJquery,
			init: function(selector){
				this[0] = document.getElementById(selector);
				this.length = 1;			
				this.log = function(){
					console.log("jquery");
				};
			}
		};

		myJquery.extend = myJquery.fn.extend = function(){
			console.log(this + " && this is extend method");
		};
		window.myJquery = myJquery;
	}(window));

	(function(window, undefined){
		var myJquery1 = function(selector){
			return new _myJquery1(selector);
		};	

		var _myJquery1 = function(selector){
			this[0] = document.getElementById(selector);
			this.length = 1;
			this.log = function(){
				console.log("jquery1");
			};
		};


		myJquery1.prototype = myJquery1.fn = {
			constructor: myJquery1,
		};

		_myJquery1.prototype = myJquery1.fn;

		window.myJquery1 = myJquery1;
	}(window));

	//Need to check:
	//myJquery1 vs myJquery : Output is the same
	var a = myJquery("myDiv");
	var b = myJquery1("myDiv");
	a.log();
	b.log();


	
	
	function con(x, y){
		this.X = x;
		this.Y = y;
	};

	function con1(x, y){
		return {
			X:x,
			Y:y
		};	
	};

	
	con.prototype.log = function(){
		console.log("I'm log");
	};


	var c = new con(1,2);
	var cc = new con(3,4);

	var c1 = con1(2,3);
	var c2 = con1(3,4);

	c1.log = function(){
		console.log("I'm log -- Not new");
	};

	console.log(c.log());
	console.log(cc.log());
	console.log(c1.log());
	//console.log(c2.log());  TypeError

	var obj = {};
	var obj1 = function(){};

	var ins1 = new obj1();
	//var ins = new obj(); TypeError

	/*===============================================  OO Javascript ============================================================ */

	//Every instance has connection
	//Local property is not commonable, Prototype property is common property. Prototype property can save memory.
	function Cat(name, weight){
		this.name = name;
		this.weight = weight;
	};
	
	Cat.prototype.type = "Cat";
	Cat.prototype.eat = function(){ console.log("I'm a cat, I'm eating!"); };

	var cat1 = new Cat("cat",100);
	var cat2 = new Cat("cat",200);

	console.log(cat1 instanceof Cat);
	console.log(cat1.eat === cat2.eat);

	
	function Animal(){
		this.race = "race";
	};

	Animal.prototype.species = ["spe1", "spe2", "spe3"];
	
	//Constuctor Inherit
	function Cow(name){
		Animal.apply(this, arguments);
		this.name = name;
	};
	
	var cow1 = new Cow("cow1");
	console.log(cow1.race);

	//Prototype Inherit
	function extendPrototype(child, parents, onlyPrototypeFromParents){
		var temp = function(){};
		//What can we do if parents has parameters ?
		if(onlyPrototypeFromParents){
			temp.prototype = parents.prototype;
			child.prototype = new temp();
		}else{
			temp.prototype = new parents();
			child.prototype = temp.prototype;
		};
		
		child.prototype.constructor = child;
		child.prototype.uber = parents.prototype;
	};
	
	extendPrototype(Cat,Animal, false);
	var cat3 = new Cat("cat3",300);
	console.log(cat3.race);
	console.log(cat3.species);
	console.log(Animal.prototype.constructor);

	//Deep-Copy Inherit (Non constructor)
	var Car = {
		race : "race"
	};

	Car.species = ["spe1", "spe2", "spe3"]; 

	function extendDeepCopy(parents, child){
		var child = child || {};
		for(var p in parents){
			if(typeof parents[p] === "object"){
				child[p] = ( parents[p].constructor === Array ) ? [] : {};
				extendDeepCopy(parents[p], child[p]);
			} else {
				child[p] = parents[p];
			}
		};

		return child;
	};

	
	var Suv = extendDeepCopy(Car);
	Suv.species.push("spe4");
	console.log(Suv.species);
	console.log(Car.species);

	//Minimalist Approach
	//What if Computer has parameters
	var Computer = {
		_CPU : "I7",
		createNew : function(){
			var c = {};
			c.Name = name;
			c.getCPU = function(){ return Computer._CPU; };
			c.changeCPU = function(cpu){
				Computer._CPU = cpu;
			};
			
			return c;
		}
	
	};

	var Mac = {
		createNew: function(){
					   
			var type = "iMac";
			var m = Computer.createNew();
			m.name = "Mac";
			m.getType = function(){ return type; };

			return m;
		}
	};

	
	var mac1 = Mac.createNew();
	console.log(mac1.getCPU());
	mac1.changeCPU("mac cpu");
	console.log(mac1.getCPU());
	console.log(mac1.name);
	console.log(mac1.type);
	console.log(mac1.getType());



	/*========================================   OO Javascript End ================================================== */

</script>

